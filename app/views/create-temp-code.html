{% extends "govuk-prototype-kit/layouts/govuk-branded.html" %}

{% block pageTitle %}
  Create temporary identity code â€“ GOV.UK Digital ID
{% endblock %}

{% block header %}
  {{ govukHeader({
    homepageUrl: "/",
    serviceName: "GOV.UK Digital ID",
    serviceUrl: "/digital-id-home",
    navigation: [
      {
        href: "/digital-id-home",
        text: "Home"
      },
      {
        href: "#",
        text: "Settings"
      },
      {
        href: "#",
        text: "Sign out"
      }
    ]
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form action="/temp-code-record" method="post" novalidate>
        
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
              <h1 class="govuk-fieldset__heading">
                What type of check is this for?
              </h1>
            </legend>
            <div class="govuk-radios" data-module="govuk-radios">
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="check-over18" name="check-type" type="radio" value="Over 18" checked>
                <label class="govuk-label govuk-radios__label" for="check-over18">
                  Over 18
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="check-under18" name="check-type" type="radio" value="Under 18">
                <label class="govuk-label govuk-radios__label" for="check-under18">
                  Under 18
                </label>
              </div>
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" id="check-identity" name="check-type" type="radio" value="Identity verification">
                <label class="govuk-label govuk-radios__label" for="check-identity">
                  Identity verification
                </label>
              </div>
            </div>
          </fieldset>
        </div>

        <div class="govuk-inset-text">
          <h3 class="govuk-heading-s">Future check types</h3>
          <p class="govuk-body-s">We're working to add more verification options including: Driving licence status, Address confirmation, Work at NHS, Veteran identity, Director of a company, Right to Work, Visa type and validity, Benefit recipient, Vehicle ownership, Clean criminal record, Student identity, and Maternity exemption.</p>
        </div>

        <button class="govuk-button" data-module="govuk-button">
          Save and continue
        </button>

        <p class="govuk-body">
          <a href="/digital-id-home" class="govuk-link">Cancel</a>
        </p>
      </form>
    </div>
  </div>

  <script>
    // Handle form submission
    (function() {
      var form = document.querySelector('form');
      
      // Load previous value if exists
      var savedCheckType = sessionStorage.getItem('checkType');
      if (savedCheckType) {
        var radioButton = document.querySelector('input[name="check-type"][value="' + savedCheckType + '"]');
        if (radioButton) {
          radioButton.checked = true;
        }
      }
      
      // Store value in sessionStorage on form submit
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          var checkType = document.querySelector('input[name="check-type"]:checked').value;
          sessionStorage.setItem('checkType', checkType);
          // Navigate to next page with query parameter
          window.location.href = '/temp-code-record?check-type=' + encodeURIComponent(checkType);
        });
      }
    })();
  </script>
{% endblock %}

